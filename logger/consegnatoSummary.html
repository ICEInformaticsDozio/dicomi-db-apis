<!DOCTYPE html>
<html lang="it">

<head>
   <meta charset="UTF-8">
   <title>Report Email</title>
   <style>
      /* Stili base per email */
      body {
         font-family: Arial, sans-serif;
         margin: 0;
         padding: 20px;
         background-color: #f6f6f6;
      }

      .container {
         background-color: #ffffff;
         padding: 20px;
         border: 1px solid #dddddd;
         max-width: 600px;
         margin: auto;
      }

      .header {
         text-align: center;
         margin-bottom: 20px;
      }

      .kpi-container {
         display: flex;
         flex-wrap: wrap;
         justify-content: space-between;
         margin-bottom: 20px;
      }

      .kpi {
         background-color: #efefef;
         padding: 10px;
         margin: 5px;
         flex: 1 0 22%;
         min-width: 100px;
         text-align: center;
         border-radius: 4px;
      }

      .kpi strong {
         font-size: 14px;
      }

      .kpi span[id] {
         display: block;
         margin-top: 8px;
      }

      /* Sezione date + articoli */
      .dates-container {
         margin-bottom: 20px;
      }

      .dates-container .date-row {
         display: flex;
         flex-direction: column;
         /* titolo sopra */
         margin-bottom: 15px;
         border-bottom: 1px solid #eee;
         padding-bottom: 10px;
      }

      .dates-container .date-label {
         font-weight: bold;
         color: #333;
         margin-bottom: 8px;
      }

      .dates-container .articles-row {
         display: flex;
         flex-wrap: nowrap;
         /* non fare wrapping */
         width: 100%;
      }

      .dates-container .articles-row .kpi {
         flex: 1 1 0;
         /* dividono equamente */
         min-width: 0;
         margin: 0 5px;
         padding: 8px;
      }

      /* Sezione per il dump del log */
      .log-dump {
         background-color: #f0f0f0;
         border: 1px solid #ccc;
         padding: 10px;
         font-family: monospace;
         white-space: pre-wrap;
         overflow-x: auto;
      }

      @media screen and (min-width: 1024px) {
         .container {
            max-width: 1000px;
         }
      }
   </style>
</head>

<body>
   <div class="container">

      <!-- Titolo con data dinamica -->
      <div class="header">
         <h1>Data del file: <span id="report-date">[DATA]</span></h1>
      </div>

      <!-- KPI dinamici principali -->
      <div class="kpi-container">
         <div class="kpi">
            <strong>❌ Righe contenenti<br><span style="color: red;">Errori</span></strong><br>
            <span id="kpi1">[VAL CODICE 1]</span>
         </div>
         <div class="kpi">
            <strong>⚠️ Righe che sono state<br><span style="color: darkorange;">Ignorate</span></strong><br>
            <span id="kpi2">[VAL CODICE 2]</span>
         </div>
         <div class="kpi">
            <strong>✅ Righe che sono state<br><span style="color: green;">Inserite / Modificate</span></strong><br>
            <span id="kpi4">[VAL CODICE 0]</span>
         </div>
      </div>

      <!-- SEZIONE DATE + KPI PER ARTICOLO -->
      <div class="dates-container">
         <!-- LOOP START: per ogni elemento del payload -->
         [LOOP]
         <!-- LOOP END -->
      </div>

      <!-- Sezione per il dump del log -->
      <div>
         <h2>Dettagli di esecuzione:</h2>
         <pre class="log-dump">[LOG DUMP]</pre>
      </div>
   </div>
</body>

</html>